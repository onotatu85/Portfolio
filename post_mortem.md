# データ連携機能（CSV取込）における不具合多発インシデント ポストモーテム

## 1. 概要
自治体向け健康管理システムにおいて、
外部システムから出力されるCSVファイルを取り込むデータ連携機能で、
リリース後に複数の不具合問い合わせが発生した事例についての振り返りを行う。

## 2. 背景・前提条件
- 本機能は自社および外注ベンダーが分担して設計・製造していた
- 設計書が複数存在し、最新仕様が分かりにくい状態であった
- 受入テストは実施されていたが、成果物レビューの体制は限定的であった
- 本人はプロジェクト途中から参加し、主に保守・受入テストを担当していた

## 3. 影響範囲
- CSV取込時にエラーが発生する
- 一部データが意図しない形で登録される
- 利用現場での業務が一時的に滞るケースが発生

## 4. 発生した事象
- 特定条件下でCSV取込処理が異常終了する
- 正常終了しても、入力内容と異なるデータが登録されるケースがあった
- 事前テストでは検知されていなかった操作手順で不具合が顕在化した

## 5. 原因分析
- 設計書と実装内容に乖離があり、仕様の正解が曖昧な状態であった
- 受入テストが「設計書通りの確認」に偏り、
  実際の利用現場を想定したテスト観点が不足していた
- 不具合報告時の再現条件が整理されておらず、
  調査開始までに時間を要していた

## 6. 対応内容
- 設計書、実装コード、実行時ログを突き合わせ、
  現在の正しい挙動を仕様として整理した
- CSV取込に関する正常系・異常系テスト観点を再整理し、
  チェックリストとして明文化した
- 問い合わせ対応時には、発生条件・操作手順・期待結果を整理し、
  再現性を確認した上で修正依頼を行う運用に変更した

## 7. 再発防止策
- データ連携機能については、受入テスト時に必ず
  異常系・境界値を含めた確認を行う
- 不具合報告時のテンプレートを整備し、
  再現条件が明確な状態で調査を開始できるようにした
- 仕様が曖昧な箇所については、文書化を優先する運用とした

## 8. 学び
- 保守・運用フェーズにおいても、
  仕様整理とテスト設計が品質を大きく左右する
- 再現条件を言語化することで、
  調査・修正対応の効率を大きく改善できる
- 不十分な前提条件下でも、
  事実（コード・ログ）を基に整理することで
  品質改善につなげられることを学んだ
